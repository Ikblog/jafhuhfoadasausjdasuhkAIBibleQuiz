<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bible Quiz - Exodus</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            color: #ffffff;
            text-align: center;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 118, 117, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 200, 255, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        /* Splash Screen Styles */
        #splash-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 40px 20px;
            position: relative;
        }

        #splash-title {
            font-size: clamp(3rem, 8vw, 4.5rem);
            font-weight: 800;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            animation: titleGlow 3s ease-in-out infinite alternate;
            text-shadow: 0 0 40px rgba(102, 126, 234, 0.3);
        }

        @keyframes titleGlow {
            from { filter: brightness(1) drop-shadow(0 0 20px rgba(102, 126, 234, 0.3)); }
            to { filter: brightness(1.1) drop-shadow(0 0 30px rgba(102, 126, 234, 0.5)); }
        }

        #splash-subtitle {
            font-size: clamp(1.2rem, 4vw, 1.8rem);
            color: #c7d2fe;
            margin-bottom: 50px;
            font-weight: 300;
            letter-spacing: 0.5px;
            opacity: 0;
            animation: fadeInUp 1s ease-out 0.5s forwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        #level-selection {
            margin-bottom: 40px;
            opacity: 0;
            animation: fadeInUp 1s ease-out 1s forwards;
        }

        #level-selection h3 {
            color: #fbbf24;
            margin-bottom: 30px;
            font-size: clamp(1.3rem, 3vw, 1.6rem);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .level-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
            gap: 20px;
            max-width: 500px;
            margin: 0 auto 40px;
        }

        .level-btn {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1.2em;
            font-weight: 700;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            min-height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .level-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .level-btn:hover::before {
            left: 100%;
        }

        .level-btn:hover {
            transform: translateY(-5px) scale(1.05);
            border-color: rgba(102, 126, 234, 0.6);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.3);
            background: rgba(102, 126, 234, 0.2);
        }

        .level-btn.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: #667eea;
            color: white;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            transform: translateY(-3px) scale(1.02);
        }

        #play-button {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            border: none;
            padding: 25px 60px;
            font-size: clamp(1.4rem, 4vw, 2rem);
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: 0 15px 35px rgba(255, 107, 107, 0.3);
            position: relative;
            overflow: hidden;
            opacity: 0;
            animation: fadeInUp 1s ease-out 1.5s forwards;
        }

        #play-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s;
        }

        #play-button:hover::before {
            left: 100%;
        }

        #play-button:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 20px 50px rgba(255, 107, 107, 0.5);
        }

        #play-button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
            background: linear-gradient(135deg, #cccccc 0%, #999999 100%);
            box-shadow: none;
        }

        #play-button:disabled:hover::before {
            left: -100%;
        }

        #splash-description {
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            color: #a5b4fc;
            margin-top: 40px;
            max-width: 700px;
            line-height: 1.8;
            font-weight: 300;
            opacity: 0;
            animation: fadeInUp 1s ease-out 2s forwards;
        }

        /* Quiz Container Styles */
        #quiz-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 20px;
            display: none;
            min-height: 100vh;
        }

        #back-to-menu {
            position: fixed;
            top: 30px;
            left: 30px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.2);
            padding: 15px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        #back-to-menu:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(-5px);
            border-color: rgba(102, 126, 234, 0.6);
        }

        #header {
            margin-bottom: 40px;
            text-align: center;
        }

        #title {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 800;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
        }

        #subtitle {
            font-size: clamp(1rem, 3vw, 1.3rem);
            color: #c7d2fe;
            margin-bottom: 20px;
            font-weight: 300;
        }

        #level-display {
            font-size: clamp(1.4rem, 4vw, 2rem);
            font-weight: 700;
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 20px 0;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        #question-box {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            color: #1f2937;
            padding: 40px;
            border-radius: 25px;
            font-size: clamp(1.2rem, 3vw, 1.6rem);
            margin: 30px auto;
            min-height: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            line-height: 1.6;
            font-weight: 500;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            animation: slideInDown 0.6s ease-out;
        }

        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        #reference {
            font-size: 1rem;
            color: #fbbf24;
            font-weight: 600;
            margin-bottom: 20px;
            font-style: italic;
        }

        .answer-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px auto;
            max-width: 900px;
        }

        .answer-box {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            color: white;
            padding: 25px;
            border-radius: 20px;
            font-size: clamp(1rem, 2.5vw, 1.3rem);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            line-height: 1.4;
            font-weight: 500;
            position: relative;
            overflow: hidden;
            animation: fadeInUp 0.6s ease-out;
            animation-fill-mode: both;
        }

        .answer-box:nth-child(1) { animation-delay: 0.1s; }
        .answer-box:nth-child(2) { animation-delay: 0.2s; }
        .answer-box:nth-child(3) { animation-delay: 0.3s; }
        .answer-box:nth-child(4) { animation-delay: 0.4s; }

        .answer-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.6s;
        }

        .answer-box:hover::before {
            left: 100%;
        }

        .answer-box:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: rgba(102, 126, 234, 0.6);
            background: rgba(102, 126, 234, 0.2);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.3);
        }

        .answer-box.selected {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-color: #10b981;
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 40px rgba(16, 185, 129, 0.4);
        }

        .answer-box.incorrect {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            border-color: #ef4444;
        }

        #timer-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 30px 0;
        }

        #timer {
            font-size: clamp(1.2rem, 3vw, 1.6rem);
            font-weight: 700;
            color: #ffffff;
            background: rgba(239, 68, 68, 0.9);
            backdrop-filter: blur(15px);
            padding: 15px 30px;
            border-radius: 50px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            border: 2px solid rgba(239, 68, 68, 0.3);
            box-shadow: 0 10px 30px rgba(239, 68, 68, 0.3);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        #progress-container {
            margin: 30px 0;
        }

        #progress {
            font-size: clamp(1rem, 2.5vw, 1.3rem);
            color: #c7d2fe;
            margin-bottom: 15px;
            font-weight: 600;
        }

        #progress-bar {
            width: 100%;
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            overflow: hidden;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        #progress-bar-fill {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 25px;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }

        .modal-content {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.9) 100%);
            backdrop-filter: blur(30px);
            margin: 5% auto;
            padding: 50px;
            border-radius: 30px;
            width: 90%;
            max-width: 600px;
            text-align: center;
            color: #1f2937;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            animation: modalSlideIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        #congratulations {
            font-size: clamp(2rem, 5vw, 2.8rem);
            font-weight: 800;
            margin-bottom: 25px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        #score-display {
            font-size: clamp(1.4rem, 4vw, 2rem);
            margin-bottom: 30px;
            font-weight: 700;
            color: #374151;
        }

        #encouragement {
            font-size: clamp(1.1rem, 3vw, 1.4rem);
            margin-bottom: 40px;
            color: #6b7280;
            line-height: 1.6;
            font-weight: 400;
        }

        .modal-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            margin: 0 10px 10px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .modal-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
        }

        .modal-btn.secondary {
            background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
        }

        .modal-btn.secondary:hover {
            box-shadow: 0 15px 35px rgba(107, 114, 128, 0.4);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .level-grid {
                grid-template-columns: repeat(5, 1fr);
                max-width: 350px;
                gap: 15px;
            }
            
            .level-btn {
                padding: 15px;
                min-height: 60px;
                font-size: 1.1em;
            }
            
            .answer-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            #question-box {
                padding: 25px;
                margin: 20px auto;
            }
            
            .modal-content {
                margin: 10% auto;
                padding: 30px;
                width: 95%;
            }
            
            #back-to-menu {
                top: 20px;
                left: 20px;
                padding: 12px 20px;
                font-size: 0.9rem;
            }

            .modal-btn {
                padding: 12px 25px;
                font-size: 1rem;
                margin: 0 5px 10px;
            }
        }

        @media (max-width: 480px) {
            .level-grid {
                grid-template-columns: repeat(3, 1fr);
                max-width: 280px;
            }

            #play-button {
                padding: 20px 40px;
                font-size: 1.2rem;
            }

            .modal-content {
                padding: 20px;
            }

            .modal-btn {
                display: block;
                width: 100%;
                margin: 10px 0;
            }
        }
    </style>
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash-screen">
        <div id="splash-title">Bible Quiz</div>
        <div id="splash-subtitle">Test Your Knowledge of Exodus</div>
        
        <div id="level-selection">
            <h3>Select Level</h3>
            <div class="level-grid">
                <button class="level-btn" data-level="1">1</button>
                <button class="level-btn" data-level="2">2</button>
                <button class="level-btn" data-level="3">3</button>
                <button class="level-btn" data-level="4">4</button>
                <button class="level-btn" data-level="5">5</button>
                <button class="level-btn" data-level="6">6</button>
                <button class="level-btn" data-level="7">7</button>
                <button class="level-btn" data-level="8">8</button>
                <button class="level-btn" data-level="9">9</button>
                <button class="level-btn" data-level="10">10</button>
            </div>
        </div>
        
        <button id="play-button" disabled>Start Quiz</button>
        <div id="splash-description">
            Journey through the book of Exodus with challenging questions about the Israelites' deliverance from Egypt, 
            the giving of the Law, and God's mighty acts. Each level increases in difficulty 
            with more questions to test your biblical knowledge.
        </div>
    </div>

    <!-- Quiz Game -->
    <div id="quiz-container">
        <button id="back-to-menu">← Menu</button>
        
        <div id="header">
            <div id="title">Bible Quiz</div>
            <div id="subtitle">Test Your Knowledge of Exodus</div>
            <div id="level-display">LEVEL 1</div>
        </div>
        
        <div id="question-box">Get ready to begin the quiz!</div>
        <div id="reference"></div>
        
        <div id="timer-container">
            <div id="timer">
                <span id="timer-icon">⏱️</span>
                <span id="time-left">30</span> seconds
            </div>
        </div>
        
        <div id="progress-container">
            <div id="progress">Question <span id="current-question">0</span> of <span id="total-questions">0</span></div>
            <div id="progress-bar">
                <div id="progress-bar-fill"></div>
            </div>
        </div>
        
        <div class="answer-container">
            <div class="answer-box" data-index="0"></div>
            <div class="answer-box" data-index="1"></div>
            <div class="answer-box" data-index="2"></div>
            <div class="answer-box" data-index="3"></div>
        </div>
    </div>

    <!-- Score Modal -->
    <div id="scoreModal" class="modal">
        <div class="modal-content">
            <h2 id="congratulations"></h2>
            <p id="score-display"></p>
            <p id="encouragement"></p>
            <button class="modal-btn" id="next-level-btn">Next Level</button>
            <button class="modal-btn secondary" id="retry-btn">Retry Level</button>
            <button class="modal-btn secondary" id="close-btn">Main Menu</button>
        </div>
    </div>

    <script>
        // Game state variables
        const gameState = {
            currentQuestion: 0,
            score: 0,
            timeLeft: 30,
            timer: null,
            currentLevel: 1,
            selectedLevel: 0,
            questions: [],
            totalQuestions: 0,
            selectedAnswerIndex: -1,
            answerSelected: false
        };

        // DOM elements
        const elements = {
            splashScreen: document.getElementById('splash-screen'),
            quizContainer: document.getElementById('quiz-container'),
            questionBox: document.getElementById('question-box'),
            reference: document.getElementById('reference'),
            timeLeft: document.getElementById('time-left'),
            currentQuestion: document.getElementById('current-question'),
            totalQuestions: document.getElementById('total-questions'),
            progressBarFill: document.getElementById('progress-bar-fill'),
            levelDisplay: document.getElementById('level-display'),
            playButton: document.getElementById('play-button'),
            backToMenu: document.getElementById('back-to-menu'),
            scoreModal: document.getElementById('scoreModal'),
            congratulations: document.getElementById('congratulations'),
            scoreDisplay: document.getElementById('score-display'),
            encouragement: document.getElementById('encouragement'),
            nextLevelBtn: document.getElementById('next-level-btn'),
            retryBtn: document.getElementById('retry-btn'),
            closeBtn: document.getElementById('close-btn'),
            timerElement: document.getElementById('timer'),
            answerBoxes: document.querySelectorAll('.answer-box'),
            levelButtons: document.querySelectorAll('.level-btn')
        };

        // Bible questions organized by level (Exodus only)
        const allQuestions = {
            1: [
                { question: "Who found baby Moses in the Nile River?", 
                  answers: ["Pharaoh's daughter", "Miriam", "Zipporah", "The midwives"], 
                  correct: 0,
                  reference: "Exodus 2:5" },
                { question: "What was Moses doing when he saw the burning bush?", 
                  answers: ["Praying", "Leading the Israelites", "Tending his father-in-law's flock", "Building a house"], 
                  correct: 2,
                  reference: "Exodus 3:1" },
                { question: "What did God tell Moses to remove from his feet at the burning bush?", 
                  answers: ["His shoes", "His socks", "His sandals", "His jewelry"], 
                  correct: 2,
                  reference: "Exodus 3:5" },
                { question: "What sign did God give Moses to prove His power?", 
                  answers: ["Turning water to blood", "Turning Moses' staff into a snake", "Parting the Red Sea", "Sending locusts"], 
                  correct: 1,
                  reference: "Exodus 4:2-4" },
                { question: "Who was Moses' brother who spoke for him to Pharaoh?", 
                  answers: ["Aaron", "Miriam", "Joshua", "Caleb"], 
                  correct: 0,
                  reference: "Exodus 4:14-16" }
            ],
            2: [
                { question: "What was the first plague God sent on Egypt?", 
                  answers: ["Frogs", "Gnats", "Water turned to blood", "Darkness"], 
                  correct: 2,
                  reference: "Exodus 7:20" },
                { question: "Which plague did the Egyptian magicians admit was 'the finger of God'?", 
                  answers: ["Gnats", "Flies", "Boils", "Hail"], 
                  correct: 0,
                  reference: "Exodus 8:19" },
                { question: "What did the Israelites put on their doorposts during the final plague?", 
                  answers: ["Olive oil", "Lamb's blood", "Bitter herbs", "Unleavened bread"], 
                  correct: 1,
                  reference: "Exodus 12:7" },
                { question: "What was the final plague that convinced Pharaoh to let Israel go?", 
                  answers: ["Death of the firstborn", "Locusts", "Boils", "Hail"], 
                  correct: 0,
                  reference: "Exodus 12:29" },
                { question: "What did the Israelites take with them when they left Egypt?", 
                  answers: ["Gold and silver", "Only their clothes", "Their Egyptian friends", "Livestock and possessions"], 
                  correct: 3,
                  reference: "Exodus 12:35-36" },
                { question: "How did God lead the Israelites by day?", 
                  answers: ["By a cloud", "By a star", "By a fire", "By an angel"], 
                  correct: 0,
                  reference: "Exodus 13:21" }
            ],
            3: [
                { question: "What body of water did the Israelites cross to escape Pharaoh's army?", 
                  answers: ["The Nile River", "The Red Sea", "The Jordan River", "The Dead Sea"], 
                  correct: 1,
                  reference: "Exodus 14:21" },
                { question: "How did God provide water for the Israelites at Marah?", 
                  answers: ["He told Moses to strike a rock", "He made bitter water sweet", "He sent rain", "He created a spring"], 
                  correct: 1,
                  reference: "Exodus 15:25" },
                { question: "What food did God provide for the Israelites in the wilderness?", 
                  answers: ["Manna", "Quail", "Both manna and quail", "Bread from heaven"], 
                  correct: 2,
                  reference: "Exodus 16:13-15" },
                { question: "How many commandments did God give Moses on Mount Sinai?", 
                  answers: ["7", "10", "12", "40"], 
                  correct: 1,
                  reference: "Exodus 20:1-17" },
                { question: "What did the Israelites make while Moses was on Mount Sinai?", 
                  answers: ["A tower", "A golden calf", "A bronze serpent", "An altar"], 
                  correct: 1,
                  reference: "Exodus 32:4" },
                { question: "Where were the Ten Commandments stored?", 
                  answers: ["In the Tabernacle", "In the Ark of the Covenant", "In a special tent", "In Moses' tent"], 
                  correct: 1,
                  reference: "Exodus 40:20" },
                { question: "What was the purpose of the Tabernacle?", 
                  answers: ["As a meeting place with God", "As a storage place for manna", "As Moses' house", "As a hospital"], 
                  correct: 0,
                  reference: "Exodus 25:8" }
            ],
            4: [
                { question: "What was the name of Moses' father-in-law?", 
                  answers: ["Jethro", "Aaron", "Hur", "Joshua"], 
                  correct: 0,
                  reference: "Exodus 3:1" },
                { question: "What did Moses hold up during the battle with Amalek?", 
                  answers: ["A sword", "The Ten Commandments", "His staff", "The Ark"], 
                  correct: 2,
                  reference: "Exodus 17:9-11" },
                { question: "Who helped hold up Moses' arms during the battle with Amalek?", 
                  answers: ["Aaron and Hur", "Joshua and Caleb", "Miriam and Zipporah", "Jethro and Eleazar"], 
                  correct: 0,
                  reference: "Exodus 17:12" },
                { question: "What was the penalty for working on the Sabbath?", 
                  answers: ["A fine", "Exile", "Death", "Forty lashes"], 
                  correct: 2,
                  reference: "Exodus 31:15" },
                { question: "What materials were used to build the Tabernacle?", 
                  answers: ["Gold, silver, and bronze", "Wood, stone, and clay", "Only what they found in the desert", "Materials from Egypt"], 
                  correct: 3,
                  reference: "Exodus 35:21-29" },
                { question: "Who was the first high priest of Israel?", 
                  answers: ["Moses", "Aaron", "Eleazar", "Joshua"], 
                  correct: 1,
                  reference: "Exodus 28:1" },
                { question: "What covered the Tabernacle when the cloud moved?", 
                  answers: ["A pillar of fire", "A silver covering", "A golden light", "A thick darkness"], 
                  correct: 0,
                  reference: "Exodus 40:38" },
                { question: "How many times is 'Let my people go' mentioned in Exodus?", 
                  answers: ["3", "5", "7", "10"], 
                  correct: 2,
                  reference: "Exodus 5:1; 7:16; 8:1, 20; 9:1, 13; 10:3" }
            ],
            5: [
                { question: "How old was Moses when he stood before Pharaoh?", 
                  answers: ["40", "80", "120", "The Bible doesn't say"], 
                  correct: 1,
                  reference: "Exodus 7:7" },
                { question: "How many days of darkness were there in Egypt?", 
                  answers: ["1", "3", "7", "10"], 
                  correct: 1,
                  reference: "Exodus 10:22" },
                { question: "What was the 'festival to the Lord' that Moses asked to celebrate in the wilderness?", 
                  answers: ["Passover", "Firstfruits", "Pentecost", "The Bible doesn't specify"], 
                  correct: 3,
                  reference: "Exodus 5:1" },
                { question: "What did God provide to shade the Israelites from the sun?", 
                  answers: ["A cloud", "Large trees", "Tents", "Mountain shadows"], 
                  correct: 0,
                  reference: "Exodus 13:21" },
                { question: "How many Israelite men left Egypt in the Exodus?", 
                  answers: ["About 600", "About 6,000", "About 60,000", "About 600,000"], 
                  correct: 3,
                  reference: "Exodus 12:37" },
                { question: "What did the Israelites complain about at Marah?", 
                  answers: ["No food", "Bitter water", "No meat", "The heat"], 
                  correct: 1,
                  reference: "Exodus 15:23" },
                { question: "How many spies did Moses send to explore Canaan?", 
                  answers: ["2", "10", "12", "40"], 
                  correct: 2,
                  reference: "Numbers 13:1-2" },
                { question: "What was the punishment for the golden calf incident?", 
                  answers: ["40 years in wilderness", "Death of 3,000 men", "Plague", "Both B and C"], 
                  correct: 3,
                  reference: "Exodus 32:28, 35" }
            ],
            6: [
                { question: "What was the name of Moses' wife?", 
                  answers: ["Miriam", "Zipporah", "Elizabeth", "Sarah"], 
                  correct: 1,
                  reference: "Exodus 2:21" },
                { question: "How many plagues did God send on Egypt?", 
                  answers: ["7", "10", "12", "40"], 
                  correct: 1,
                  reference: "Exodus 7-12" },
                { question: "What did the Israelites eat the night before leaving Egypt?", 
                  answers: ["Manna", "Quail", "Passover lamb", "Bitter herbs"], 
                  correct: 2,
                  reference: "Exodus 12:8" },
                { question: "What did God command the Israelites to remember about their deliverance?", 
                  answers: ["The plagues", "The Passover", "The Red Sea crossing", "All of the above"], 
                  correct: 3,
                  reference: "Exodus 12-13" },
                { question: "What did Jethro advise Moses to do to govern the people?", 
                  answers: ["Appoint judges", "Ask Pharaoh for help", "Divide the people into tribes", "Build more altars"], 
                  correct: 0,
                  reference: "Exodus 18:17-22" },
                { question: "What was the purpose of the bronze serpent?", 
                  answers: ["To heal snake bites", "As a symbol of God's power", "To frighten enemies", "As an idol"], 
                  correct: 0,
                  reference: "Numbers 21:8-9" },
                { question: "How many laws are in the Book of the Covenant (Exodus 20-23)?", 
                  answers: ["10", "40", "613", "The exact number isn't given"], 
                  correct: 3,
                  reference: "Exodus 20-23" },
                { question: "What did the Israelites promise when God gave the Law at Sinai?", 
                  answers: ["'All that the Lord has spoken we will do'", "'We need time to consider'", "'This is too hard for us'", "'Send us a sign'"], 
                  correct: 0,
                  reference: "Exodus 19:8" }
            ],
            7: [
                { question: "What was the 'bread of the Presence' in the Tabernacle?", 
                  answers: ["Manna", "Unleavened bread", "Bread offered to God", "Bread for the priests"], 
                  correct: 2,
                  reference: "Exodus 25:30" },
                { question: "What materials were used for the priestly garments?", 
                  answers: ["Linen only", "Wool and linen", "Gold, blue, purple, scarlet, and linen", "Animal skins"], 
                  correct: 2,
                  reference: "Exodus 28:5" },
                { question: "What was on the high priest's breastplate?", 
                  answers: ["12 precious stones", "The Ten Commandments", "A golden calf", "A burning bush symbol"], 
                  correct: 0,
                  reference: "Exodus 28:17-21" },
                { question: "How often was incense to be burned on the altar?", 
                  answers: ["Morning only", "Evening only", "Morning and evening", "Continually"], 
                  correct: 3,
                  reference: "Exodus 30:8" },
                { question: "What was the 'atonement money' used for?", 
                  answers: ["Building the Tabernacle", "Supporting the priests", "Service of the tent of meeting", "All of the above"], 
                  correct: 2,
                  reference: "Exodus 30:16" },
                { question: "Who were the two chief craftsmen of the Tabernacle?", 
                  answers: ["Aaron and Hur", "Bezalel and Oholiab", "Joshua and Caleb", "Moses and Aaron"], 
                  correct: 1,
                  reference: "Exodus 31:1-6" },
                { question: "How did the people respond when asked to contribute materials for the Tabernacle?", 
                  answers: ["They refused", "They gave reluctantly", "They gave so much Moses had to stop them", "Only the leaders gave"], 
                  correct: 2,
                  reference: "Exodus 36:5-7" },
                { question: "What covered the Ark of the Covenant?", 
                  answers: ["The mercy seat", "A golden lid", "A blue cloth", "Both A and B"], 
                  correct: 3,
                  reference: "Exodus 25:17-21" }
            ],
            8: [
                { question: "How many curtains made up the Tabernacle?", 
                  answers: ["4", "10", "12", "40"], 
                  correct: 1,
                  reference: "Exodus 26:1-2" },
                { question: "What was the 'Urim and Thummim'?", 
                  answers: ["A musical instrument", "A method of divination", "Part of the high priest's garments", "Tools for sacrifice"], 
                  correct: 2,
                  reference: "Exodus 28:30" },
                { question: "What was the consecration ceremony for priests?", 
                  answers: ["7 days", "14 days", "30 days", "40 days"], 
                  correct: 0,
                  reference: "Exodus 29:35" },
                { question: "What was the 'altar of incense' made of?", 
                  answers: ["Bronze", "Gold", "Silver", "Acacia wood"], 
                  correct: 1,
                  reference: "Exodus 30:1-3" },
                { question: "What was the 'holy anointing oil' made of?", 
                  answers: ["Olive oil only", "Olive oil with spices", "Animal fat with spices", "The recipe isn't given"], 
                  correct: 1,
                  reference: "Exodus 30:23-25" },
                { question: "What was the penalty for making similar incense for personal use?", 
                  answers: ["Exile", "Death", "A fine", "Forty lashes"], 
                  correct: 1,
                  reference: "Exodus 30:37-38" },
                { question: "How many silver sockets supported the boards of the Tabernacle?", 
                  answers: ["40", "96", "100", "The number isn't given"], 
                  correct: 1,
                  reference: "Exodus 26:19-25" },
                { question: "What was the 'ephod'?", 
                  answers: ["A priestly garment", "A musical instrument", "A container for the Law", "A type of sacrifice"], 
                  correct: 0,
                  reference: "Exodus 28:6" }
            ],
            9: [
                { question: "What was the 'breastpiece of judgment'?", 
                  answers: ["A piece of armor", "Part of the high priest's garments", "A symbol of God's justice", "A container for the Urim and Thummim"], 
                  correct: 1,
                  reference: "Exodus 28:15" },
                { question: "What was on the high priest's turban?", 
                  answers: ["A golden plate", "A blue cord", "A scarlet thread", "A linen band"], 
                  correct: 0,
                  reference: "Exodus 28:36" },
                { question: "How many times did Moses go up Mount Sinai?", 
                  answers: ["1", "2", "3", "40"], 
                  correct: 1,
                  reference: "Exodus 19:20; 24:18; 34:4" },
                { question: "What was the 'testimony' placed in the Ark?", 
                  answers: ["The Ten Commandments", "Aaron's rod", "A jar of manna", "All of the above"], 
                  correct: 0,
                  reference: "Exodus 25:16" },
                { question: "How many cubits long was the Ark of the Covenant?", 
                  answers: ["1", "2.5", "5", "10"], 
                  correct: 1,
                  reference: "Exodus 25:10" },
                { question: "What was the 'table of showbread' made of?", 
                  answers: ["Bronze", "Gold", "Silver", "Acacia wood"], 
                  correct: 3,
                  reference: "Exodus 25:23" },
                { question: "How many lamps were on the golden lampstand?", 
                  answers: ["3", "7", "10", "12"], 
                  correct: 1,
                  reference: "Exodus 25:31-32" },
                { question: "What was the 'screen' for the Tabernacle entrance made of?", 
                  answers: ["Linen", "Goat hair", "Ram skins", "All of the above"], 
                  correct: 0,
                  reference: "Exodus 26:36" }
            ],
            10: [
                { question: "How many talents of gold were used in the Tabernacle?", 
                  answers: ["10", "29", "50", "100"], 
                  correct: 1,
                  reference: "Exodus 38:24" },
                { question: "How many shekels of silver were collected for the Tabernacle?", 
                  answers: ["100", "1,000", "100,000", "The exact number isn't given"], 
                  correct: 2,
                  reference: "Exodus 38:25" },
                { question: "What was the 'laver' used for?", 
                  answers: ["Sacrifices", "Washing", "Cooking", "Storing water"], 
                  correct: 1,
                  reference: "Exodus 30:18" },
                { question: "How many pillars supported the courtyard screen?", 
                  answers: ["4", "20", "60", "100"], 
                  correct: 2,
                  reference: "Exodus 27:9-18" },
                { question: "What was the 'incense altar' made of?", 
                  answers: ["Acacia wood overlaid with gold", "Solid gold", "Bronze", "Stone"], 
                  correct: 0,
                  reference: "Exodus 30:1-3" },
                { question: "How often was the lamp in the Tabernacle to burn?", 
                  answers: ["During the day only", "At night only", "Continually", "Only on Sabbaths"], 
                  correct: 2,
                  reference: "Exodus 27:20-21" },
                { question: "What was the 'wave offering'?", 
                  answers: ["A sacrifice waved before the Lord", "A special prayer", "A type of incense", "A priestly garment"], 
                  correct: 0,
                  reference: "Exodus 29:24" },
                { question: "How many times is 'I am the Lord your God' repeated in Exodus?", 
                  answers: ["7", "10", "12", "40"], 
                  correct: 0,
                  reference: "Exodus 6:7; 16:12; 20:2; 29:46; 31:13" },
                { question: "What was the final act when the Tabernacle was completed?", 
                  answers: ["The cloud covered it", "Fire came from heaven", "The people celebrated", "Moses blessed it"], 
                  correct: 0,
                  reference: "Exodus 40:34" },
                { question: "How long did it take to build the Tabernacle?", 
                  answers: ["40 days", "6 months", "1 year", "The time isn't specified"], 
                  correct: 1,
                  reference: "Exodus 19:1; 40:17" }
            ]
        };

        // Initialize the game
        function init() {
            setupEventListeners();
        }

        // Set up all event listeners
        function setupEventListeners() {
            // Level selection buttons
            elements.levelButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const level = parseInt(button.dataset.level);
                    selectLevel(level);
                });
            });

            // Play button
            elements.playButton.addEventListener('click', startQuiz);

            // Back to menu button
            elements.backToMenu.addEventListener('click', backToMenu);

            // Answer boxes
            elements.answerBoxes.forEach(box => {
                box.addEventListener('click', () => {
                    const index = parseInt(box.dataset.index);
                    selectAnswer(box, index);
                });
            });

            // Modal buttons
            elements.nextLevelBtn.addEventListener('click', nextLevel);
            elements.retryBtn.addEventListener('click', retryQuiz);
            elements.closeBtn.addEventListener('click', backToMenu);

            // Close modal when clicking outside
            window.addEventListener('click', (event) => {
                if (event.target === elements.scoreModal) {
                    closeModal();
                }
            });
        }

        // Select level function
        function selectLevel(level) {
            gameState.selectedLevel = level;
            gameState.currentLevel = level;
            
            // Remove selected class from all buttons
            elements.levelButtons.forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Add selected class to clicked button
            const selectedButton = document.querySelector(`.level-btn[data-level="${level}"]`);
            if (selectedButton) {
                selectedButton.classList.add('selected');
            }
            
            // Enable play button
            elements.playButton.disabled = false;
            
            // Update level display text
            elements.levelDisplay.textContent = `LEVEL ${level}`;
        }

        // Start quiz function
        function startQuiz() {
            // Hide splash screen and show quiz container
            elements.splashScreen.style.display = 'none';
            elements.quizContainer.style.display = 'block';
            
            // Set questions for selected level
            gameState.questions = allQuestions[gameState.selectedLevel];
            gameState.totalQuestions = gameState.questions.length;
            
            // Reset quiz variables
            gameState.currentQuestion = 0;
            gameState.score = 0;
            gameState.selectedAnswerIndex = -1;
            gameState.answerSelected = false;
            
            // Update progress display
            updateProgress();
            
            // Start with first question
            displayQuestion();
            
            // Start timer
            startTimer();
        }

        // Display question function
        function displayQuestion() {
            // Reset timer
            resetTimer();
            
            // Get current question data
            const questionData = gameState.questions[gameState.currentQuestion];
            
            // Update question box
            elements.questionBox.textContent = questionData.question;
            elements.reference.textContent = questionData.reference;
            
            // Update answer boxes
            questionData.answers.forEach((answer, index) => {
                elements.answerBoxes[index].textContent = answer;
                elements.answerBoxes[index].classList.remove('selected', 'incorrect');
            });
            
            // Reset selected answer
            gameState.selectedAnswerIndex = -1;
            gameState.answerSelected = false;
        }

        // Select answer function
        function selectAnswer(element, index) {
            if (gameState.answerSelected) return;
            
            gameState.answerSelected = true;
            gameState.selectedAnswerIndex = index;
            
            // Remove selected class from all answers
            elements.answerBoxes.forEach(box => {
                box.classList.remove('selected');
            });
            
            // Add selected class to clicked answer
            element.classList.add('selected');
            
            // Check answer after delay
            setTimeout(checkAnswer, 500);
        }

        // Check answer function
        function checkAnswer() {
            // Stop timer
            clearInterval(gameState.timer);
            
            // Get current question data
            const questionData = gameState.questions[gameState.currentQuestion];
            
            // Check if answer is correct
            const isCorrect = gameState.selectedAnswerIndex === questionData.correct;
            
            // Update score if correct
            if (isCorrect) {
                gameState.score++;
            } else {
                // Highlight incorrect answer
                elements.answerBoxes[gameState.selectedAnswerIndex].classList.add('incorrect');
            }
            
            // Highlight correct answer
            elements.answerBoxes[questionData.correct].classList.add('selected');
            
            // Move to next question after delay
            setTimeout(() => {
                gameState.currentQuestion++;
                
                // Check if quiz is complete
                if (gameState.currentQuestion < gameState.totalQuestions) {
                    displayQuestion();
                    startTimer();
                } else {
                    showResults();
                }
                
                // Update progress
                updateProgress();
            }, 1500);
        }

        // Update progress function
        function updateProgress() {
            elements.currentQuestion.textContent = gameState.currentQuestion + 1;
            elements.totalQuestions.textContent = gameState.totalQuestions;
            
            // Calculate progress percentage
            const progressPercent = ((gameState.currentQuestion) / gameState.totalQuestions) * 100;
            elements.progressBarFill.style.width = `${progressPercent}%`;
        }

        // Timer functions
        function startTimer() {
            gameState.timeLeft = 30;
            updateTimerDisplay();
            
            gameState.timer = setInterval(() => {
                gameState.timeLeft--;
                updateTimerDisplay();
                
                if (gameState.timeLeft <= 0) {
                    clearInterval(gameState.timer);
                    timeUp();
                }
            }, 1000);
        }

        function resetTimer() {
            clearInterval(gameState.timer);
            gameState.timeLeft = 30;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            elements.timeLeft.textContent = gameState.timeLeft;
            
            // Change color when time is running low
            if (gameState.timeLeft <= 10) {
                elements.timerElement.style.background = 'rgba(239, 68, 68, 0.9)';
                elements.timerElement.style.animation = 'pulse 0.5s ease-in-out infinite';
            } else {
                elements.timerElement.style.background = 'rgba(239, 68, 68, 0.9)';
                elements.timerElement.style.animation = 'pulse 2s ease-in-out infinite';
            }
        }

        function timeUp() {
            // Automatically move to next question
            gameState.currentQuestion++;
            
            // Check if quiz is complete
            if (gameState.currentQuestion < gameState.totalQuestions) {
                displayQuestion();
                startTimer();
            } else {
                showResults();
            }
            
            // Update progress
            updateProgress();
        }

        // Show results function
        function showResults() {
            // Calculate score percentage
            const scorePercent = Math.round((gameState.score / gameState.totalQuestions) * 100);
            
            // Update modal content
            elements.congratulations.textContent = scorePercent >= 70 ? 'Congratulations!' : 'Quiz Complete!';
            elements.scoreDisplay.textContent = `You scored ${gameState.score} out of ${gameState.totalQuestions} (${scorePercent}%)`;
            
            // Set encouragement message based on score
            let encouragement = '';
            if (scorePercent >= 90) {
                encouragement = 'Outstanding! Your knowledge of Exodus is truly impressive. Keep studying God\'s Word!';
            } else if (scorePercent >= 70) {
                encouragement = 'Great job! You have a good understanding of Exodus. Keep learning more!';
            } else if (scorePercent >= 50) {
                encouragement = 'Not bad! You know some key events in Exodus. Keep studying to improve!';
            } else {
                encouragement = 'Keep studying! The book of Exodus is foundational to understanding the Bible. Try again!';
            }
            elements.encouragement.textContent = encouragement;
            
            // Show/hide next level button based on current level
            if (gameState.currentLevel < 10) {
                elements.nextLevelBtn.style.display = 'inline-block';
            } else {
                elements.nextLevelBtn.style.display = 'none';
            }
            
            // Show modal
            elements.scoreModal.style.display = 'block';
        }

        // Next level function
        function nextLevel() {
            // Increase level
            gameState.currentLevel++;
            gameState.selectedLevel = gameState.currentLevel;
            
            // Hide modal
            closeModal();
            
            // Update level display
            elements.levelDisplay.textContent = `LEVEL ${gameState.currentLevel}`;
            
            // Start quiz with new level
            startQuiz();
        }

        // Retry quiz function
        function retryQuiz() {
            // Hide modal
            closeModal();
            
            // Start quiz with same level
            startQuiz();
        }

        // Back to menu function
        function backToMenu() {
            // Hide quiz container and show splash screen
            elements.quizContainer.style.display = 'none';
            elements.splashScreen.style.display = 'flex';
            
            // Hide modal if open
            closeModal();
            
            // Reset level selection
            elements.levelButtons.forEach(btn => {
                btn.classList.remove('selected');
            });
            elements.playButton.disabled = true;
        }

        // Close modal function
        function closeModal() {
            elements.scoreModal.style.display = 'none';
        }

        // Initialize the game when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
